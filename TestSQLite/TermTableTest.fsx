
//#I @"..\packages\Microsoft.AspNet.Identity.EntityFramework.2.2.1\lib\net45"
//#I @"..\packages\Microsoft.AspNet.Identity.Core.2.2.1\lib\net45\"
//#r "Microsoft.AspNet.Identity.Core.dll"
//#r "Microsoft.AspNet.Identity.EntityFramework.dll"
#r "System.ComponentModel.DataAnnotations.dll"
#r @"..\TestSQLite\bin\Debug\netstandard.dll"
#r @"..\TestSQLite\bin\Debug\Microsoft.EntityFrameworkCore.dll"
#r @"..\TestSQLite\bin\Debug\Microsoft.EntityFrameworkCore.Relational.dll"
#r @"..\TestSQLite\bin\Debug\Microsoft.EntityFrameworkCore.Sqlite.dll"
#r @"..\TestSQLite\bin\Debug\System.Data.SQLite.dll"
#r @"..\TestSQLite\bin\Debug\BioFSharp.dll"
#r @"..\TestSQLite\bin\Debug\BioFSharp.IO.dll"
//#r @"..\TestSQLite\bin\Debug\BioFSharp.Mz.dll"
#r @"..\TestSQLite\bin\Debug\FSharp.Care.dll"
#r @"..\TestSQLite\bin\Debug\FSharp.Care.IO.dll"

let fileDir = __SOURCE_DIRECTORY__

open System
//open System.Diagnostics
open System.ComponentModel.DataAnnotations
open System.ComponentModel.DataAnnotations.Schema
open Microsoft.EntityFrameworkCore
//open System.Linq
//open System.Linq.Expressions
//open BioFSharp.BioItem
open System.Collections.Generic
open FSharp.Care.IO
open BioFSharp.IO
open System.Data
open Microsoft.EntityFrameworkCore.Metadata.Internal
open System.Windows.Forms


//open System.Reflection



//Defining types and relations for DB/////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////

///Upper-most hierarchy of MzIdentML with sub-containers to describe relations of data. 
type [<CLIMutable>] 
     MzIdentML =
     {
      [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
      ID              : int
      Name            : string
      Version         : string
      CreationDate    : DateTime
      RowVersion      : DateTime
      MzIdentMLParams : List<MzIdentMLParam>
     }

///Param to MiIdentML-Table
and [<CLIMutable>] 
    MzIdentMLParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                         : int
    FKParamContainer           : MzIdentMLParam
    [<RequiredAttribute()>]
    Term                       : Term
    Unit                       : Term
    Value                      : string
    CV                         : CV
    AnalysisSoftware           : AnalysisSoftware
    Providers                  : Provider
    AuditCollections           : AuditCollection
    AnalysisSampleCollection   : AnalysisSampleCollection
    SequenceCollection         : SequenceCollection
    AnalysisCollection         : AnalysisCollection
    AnalysisProtocolCollection : AnalysisProtocolCollection
    DataCollection             : DataCollection
    BiblioGraphicReference     : BiblioGraphicReference
    RowVersion                 : DateTime  
    }

///The searchparameters other than the modifications searched.
and [<CLIMutable>] 
     AdditionalSearchparam =
     {
      [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
      ID                     : int
      RowVersion             : DateTime
      AdditionalSearchparams : List<AdditionalSearchparams>
      UserParam              : List<UserParam>
     }

///CvParam for AdditionalSearchParam
and [<CLIMutable>] 
    AdditionalSearchparams =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : AdditionalSearchparam
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime  
    }

///The organization a person belongs to.
and [<CLIMutable>]
    Affiliation =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
     ID           : int
     Organization : Organization
     RowVersion   : DateTime
    }

///Ambitous residues describes the range of mass that a specific location shall be checked because its position is ambitous.
and [<CLIMutable>]
    AmbitousResidue =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
     ID                    : int
     Code                  : string
     RowVersion            : DateTime
     AmbitousResidueParams : List<AmbitousResidueParam>
     UserParam             : List<UserParam>
    }

///CvParam for AmbitousResidue
and [<CLIMutable>] 
    AmbitousResidueParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : AdditionalSearchparam
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime  
    }

///Maps the input and output data sets.
and [<CLIMutable>]
    AnalysisCollection =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
     ID : int
     SpectrumIdentification : SpectrumIdentification
     ProteinDetection       : ProteinDetection
     RowVersion             : DateTime  
    }

///Data sets generated by the anaylsis of input and output.
and [<CLIMutable>]
    AnalysisData =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
     ID : int
     SpectrumidentificationList : SpectrumIdentificationList
     ProteindetectionList       : ProteinDetectionList
     RowVersion                 : DateTime
    }

///The parameters and settings for the protein etection.
and [<CLIMutable>]
    AnalysisParams =
    {
     ID        : int
     Term      : Term
     UserParam : UserParam
    }

///Collection of the Protocols of the analyses.
and [<CLIMutable>] 
    AnalysisProtocolCollection =
    {
     ID : int
     SpectrumIdentificationProtocol : SpectrumIdentificationProtocol
     ProteinDetectionProtocol       : ProteinDetectionProtocol
     DataRowVersion                 : DateTime
    }

///The samples analysed can optionally be recorded using CV terms for descriptions. If a composite sample has been analysed, the subsample association can be used to build a hierarchical description.
and [<CLIMutable>] 
    AnalysisSampleCollection =
    {
     ID         : int
     Sample     : Sample
     RowVersion : DateTime
    }

///The software used for performing the analyses.
and [<CLIMutable>] 
    AnalysisSoftware =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                     : int
    Name                   : string
    URI                    : string
    ContactRole            : ContactRole
    SoftwareName           : SoftwareName
    Customizations         : Customizations
    RowVersion             : DateTime
    //AnalysisSoftwareParams : List<AnalysisSoftwareParam>  
    }

//and [<CLIMutable>] 
//    AnalysisSoftwareParam =
//    {
//    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
//    ID               : int
//    FKParamContainer : AnalysisSoftware
//    [<RequiredAttribute()>]
//    Term             : Term
//    Unit             : Term
//    Value            : string
//    RowVersion       : DateTime  
//    }

///Lust of analysis softwares.
and [<CLIMutable>] 
    AnalysisSoftwareList =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
     ID               : int
     AnalysisSoftware : AnalysisSoftware
     RowVersion       : DateTime
    }

///The complete set of Contacts (people and organisations) for this file.
and [<CLIMutable>]
    AuditCollection =
    {
     ID           : int
     Person       : Person
     Organization : Organization
     RowVersion   : DateTime
    }

///Any bibliographic references associated with the file
and [<CLIMutable>] 
    BiblioGraphicReference =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>]
     ID          : int
     Name        : string
     Issue       : string
     Authors     : string
     DOI         : string
     Editor      : string
     Pages       : List<int>
     Publication : string
     Publisher   : string
     Title       : string
     Volume      : string
     Year        : int
     RowVersion  : DateTime
    }

///Different details, depending of the kind of contact.
and [<CLIMutable>] 
    ContactRole =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>]
     ID          : int
     Person     : Person
     Role        : Role
     RowVersion  : DateTime
    }

///Customizations on the analysis-software in the form of a free text.
and [<CLIMutable>] 
    Customizations =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>]
     ID          : int
     Description : string
     RowVersion  : DateTime
    }

///A source controlled vocabulary from which cvParams will be obtained.
and [<CLIMutable>] 
    CV =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>]
     ID         : int
     FullName   : string
     URL        : string
     Version    : string
     RowVersion : DateTime
    }

///The list of controlled vocabularies used in the file.
and [<CLIMutable>]
    CVLsit =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>]
     ID         : int
     CV         : CV
     RowVersion : DateTime
    }

///Params of CV
and [<CLIMutable>] 
    CVParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : CV
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime  
    }

///The specification of filters applied to the Database searched.
and [<CLIMutable>] 
    DatabaseFilters =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
     ID             : int
     Filter         : Filter
     RowVersion     : DateTime
    }

///Name of the Database.
and [<CLIMutable>]
    DatabaseName =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
     ID                : int
     Name              : string
     RowVersion        : DateTime
     DatabseNameParams : List<DatabaseNameParam>
    }

///Params of DatabseName.
and [<CLIMutable>] 
    DatabaseNameParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : DatabaseName
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime 
    }

///A specification of how a nucleic acid sequence Database was translated for searching.
and [<CLIMutable>] 
    DatabaseTranslation =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
     ID               : int
     Frames           : List<string> ///SelfAdded
     TranslationTable : TranslationTable
     RowVersion       : DateTime
    }

///The collection of input and output data sets of the analyses.
and [<CLIMutable>]
    DataCollection =
    {
     ID            : int
     Input         : Input
     AnalysisData  : AnalysisData
    }

///Sequence from the Database search.
and [<CLIMutable>] 
    DBSequence =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    Name             : string
    Accession        : string
    Length           : int
    Seq              : Seq
    SearchDB         : SearchDatabase
    RowVersion       : DateTime 
    DBSequenceParams : List<DBSequenceParam>
    UserParam        : List<UserParam>
    }

///Params of DBSequence.
and [<CLIMutable>] 
    DBSequenceParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : DBSequence
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime 
    }

///Infomration about the used cleavage enzyme.
and [<CLIMutable>]
    Enzyme =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
     ID           : int
     Name         : string
     SemiSpecific : bool
     CTermGain    : string
     NTermGain    : string
     MinDistance  : int
     CleavageSite : string
     RowVersion   : DateTime
     EnzymeParams : List<EnzymeParam>
    }

///Params of enzyme.
and [<CLIMutable>] 
    EnzymeParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : EnzymeParam
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime 
    }

///List of used enzyme.
and [<CLIMutable>]
    Enzymes =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
     ID          : int
     independent : bool
     Enzyme      : Enzyme
     RowVersion  : DateTime
    }

///All sequences fulfilling the specifed criteria are excluded.
and [<CLIMutable>]
    Exclude =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
     ID            : int
     Term          : Term
     RowVerion     : DateTime
     ExcludeParams : List<ExcludeParams>
    }

///Params of exclude.
and [<CLIMutable>] 
    ExcludeParams =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : Exclude
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime 
    }

///A URI to access documentation and tools to interpret the external format of the ExternalData instance.
and [<CLIMutable>]
    ExternalFormatDocumentation =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
     ID               : int
     URI              : string //Added because it seemed necessary
     Format           : string
     RowVersion       : DateTime
     FileFormatParams : List<FileFormatParam>
    }

///The format of the ExternalData file.
and [<CLIMutable>]
    FileFormat =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
     ID               : int
     Format           : string
     RowVersion       : DateTime
     FileFormatParams : List<FileFormatParam>
    }

///Params for FileFormat.
and [<CLIMutable>] 
    FileFormatParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : FileFormat
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime 
    }

///Filters applied to the search Database.
and [<CLIMutable>]
    Filter =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
     ID         : int
     FilterType : FilterType
     Exclude    : Exclude
     Include    : Include
     RowVersion : DateTime
    }

///The type of filter e.g. Database taxonomy filter, pi filter, mw filter.
and [<CLIMutable>]
    FilterType =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
     ID               : int
     Name             : string
     RowVersion       : DateTime
     FilterTypeParams : List<FilterTypeParam>
     UserParam        : List<UserParam>
    }

///Params for FilterType.
and [<CLIMutable>] 
    FilterTypeParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : FilterType
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime 
    }

///An array of values for a given type of measure and for a particular ion type, in parallel to the index of ions identified.
and [<CLIMutable>] 
    FragmentArray =
    {
     ID                 : int
     Values             : List<Value>
     FragmentationTable : Fragmentation
     RowVersion         : DateTime
    }

///Flaot value of the FragmentArray.
and [<CLIMutable>] 
    Value =
    {
     ID            : string
     Value         : float
     FragmentArray : FragmentArray
     RowVersion         : DateTime
    }

///The product ions identified in this result.
and [<CLIMutable>]
    Fragmentation =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
     ID         : int
     IonType    : IonType
     RowVersion : DateTime
    }

///Contains the types of measures that will be reported in generic arrays for each SpectrumIdentificationItem.
and [<CLIMutable>]
    FragmentationTable =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
     ID         : int
     Measure    : Measure
     RowVersion : DateTime
    }

///The tolerance of the search given as a plus and minus value with units.
and [<CLIMutable>]
    FragmentTolerance =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
     ID     : int
     Value : float
     RowVersion : DateTime
     FragmentToleranceParams : List<FragmentToleranceParam>
    }

///Params of FragmentTolerance.
and [<CLIMutable>] 
    FragmentToleranceParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : FragmentTolerance
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime 
    }

///All sequences fulfilling the specifed criteria are included.
and [<CLIMutable>]
    Include =
    {
     ID : int
     Term : Term
     RowVersion : DateTime
     IncludeParams : List<IncludeParam>
    }

///Params ofInclude.
and [<CLIMutable>] 
    IncludeParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : Include
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime 
    }

///The inputs to the analyses including the Databases searched, the spectral data and the source file converted to mzIdentML.
and [<CLIMutable>]
    Input =
    {
     ID             : int
     //URL            : string ///Added by self
     SourceFile     : SourceFile
     SearchDatabase : SearchDatabase
     SpectraData    : SpectraData
     RowVersion     : DateTime
    }

///One of the spectra data sets used.
and [<CLIMutable>]
    InputSpectra =
    {
     ID             : int
     SpectraData    : SpectraData
     RowVersion     : DateTime
    }

///The lists of spectrum identifications that are input to the protein detection process.
and [<CLIMutable>]
    InputSpectrumIdentification =
    {
     ID                         : int
     SpectrumIdentificationList : SpectraData
     RowVersion                 : DateTime
    }

///The type of ion that has been identified.
and [<CLIMutable>]
    IonType =
    {
     ID            : int
     Type          : string ///Added by self
     Charge        : int
     Index         : List<int>
     FragmentArray : FragmentArray
     RowVersion    : DateTime
     IonTypeParams : List<IonTypeParam>
     UserParam     : List<UserParam>
    }

///Params of IonType
and [<CLIMutable>] 
    IonTypeParam =
    {
     [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
     ID               : int
     FKParamContainer : IonType
     [<RequiredAttribute()>]
     Term             : Term
     Unit             : Term
     Value            : string
     RowVersion       : DateTime 
    }

///The masses of residues used in the search.
and [<CLIMutable>] 
    MassTable =
    {
     ID              : int
     Name            : string
     MSLevels        : List<MSLevel> 
     RowVersion      : DateTime
     MassTableParams : List<MassTableParam>
     UserParam       : List<UserParam>
    }

//Added because entity framework can not handle list of primitive types
///MS spectrum that the MassTable reffers to, e.g. "1" for MS1.
and [<CLIMutable>] 
    MSLevel =
    {
    ID              : int
    MSLEvel         : int
    MassTable       : MassTable
    RowVersion      : DateTime
    }

///Params of MassTable.
and [<CLIMutable>] 
    MassTableParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : MassTable
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime 
    }

///References to CV terms defining the measures about product ions to be reported in SpectrumIdentificationItem.
and [<CLIMutable>] 
    Measure =
    {
    ID              : int
    Name            : string
    MassTable       : MassTable
    RowVersion      : DateTime
    MeasureParams   : List<MeasureParam>
    }

///Params of Measure.
and [<CLIMutable>] 
    MeasureParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : Measure
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime 
    }

///A molecule modification specification. For every modification found in the peptide an extra entry should be created.
and [<CLIMutable>] 
    Modification =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                    : int
    Name                  : string 
    Residues              : string 
    MonoisotopicMassDelta : float 
    AvgMassDelta          : float 
    ModLocation           : ModLocation 
    RowVersion            : DateTime 
    ModificationParams    : List<ModificationParam>
    }

///Params of Moodification.
and [<CLIMutable>] 
    ModificationParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : Modification
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime 
    }

///The specification of static/variable modifications that are to be considered in the spectra search.
and [<CLIMutable>] 
    ModificationParams =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                    : int
    SearchModification    : SearchModification 
    RowVersion            : DateTime 
    }
//Not part of the original document
///Param that describes the location of the modification and the altered residue.
and [<CLIMutable>] 
    ModLocation =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                : int
    Peptide           : Peptide
    Modification      : Modification
    Location          : int
    Residue           : string
    RowVersion        : DateTime
    ModLocationParams : List<ModLocation>
    }

///Params of ModLocation.
and [<CLIMutable>] 
    ModLocationParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : ModLocation
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime 
    }

///Standarized vocabulary for MS-Database.
and [<CLIMutable>] 
    Ontology = 
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>]
    ID             : int
    Name           : string
    RowVersion     : DateTime
    OntologyParams : List<OntologyParam>
    Terms          : List<Term>
    }

///Params for Ontology.
and [<CLIMutable>] 
    OntologyParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                     : int
    FKParamContainer       : Ontology
    [<RequiredAttribute()>]
    Term                   : Term
    Unit                   : Term
    Value                  : string
    RowVersion             : DateTime
    }

///Entity which is responsible for analysis-software, data-file, etc. 
and [<CLIMutable>] 
    Organization =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                 : int
    Name               : string
    Parent             : Parent
    RowVersion         : DateTime
    OrganizationParams : List<OrganizationParam>
    }

///Params of Organization.
and [<CLIMutable>] 
    OrganizationParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : Organization
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime 
    }

///The containing organization.
and [<CLIMutable>] 
    Parent =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID           : int            
    //Name         : string
    Organization : Organization 
    //Country      : string         
    RowVersion   : DateTime
    //ParentParams : List<ParentParam>
    }

//and [<CLIMutable>] 
//    ParentParam =
//    {
//    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>]
//    ID               : int
//    FKParamContainer : Parent
//    [<RequiredAttribute()>]
//    Term             : Term
//    Unit             : Term
//    Value            : string
//    RowVersion       : DateTime   
//    }

///The tolerance of the search given as a plus and minus value with units.
and [<CLIMutable>] 
    ParentTolerance =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID           : int            
    Term         : Term         
    RowVersion   : DateTime
    }
///One peptide, which can have modifications. The combination of peptide and modification must be unique.
and [<CLIMutable>] 
    Peptide =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                       : int
    Name                     : string            
    PeptideSequence          : PeptideSequence
    Modification             : Modification
    SubstitutionModification : SubstitutionModification
    RowVersion               : DateTime 
    PeptideParams            : List<PeptideParam>
    UserParam                : List<UserParam>
    }

///Params of Peptide.
and [<CLIMutable>] 
    PeptideParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : Peptide
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime  
    }

///PeptideEvidence links a specific Peptide element to a specific position in a DBSequence. There MUST only be one PeptideEvidence item per Peptide-to-DBSequence-position.
and [<CLIMutable>] 
    PeptideEvidence =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                    : int
    DBSequence            : DBSequence
    Peptide               : Peptide
    isDecoy               : string 
    Frame                 : string 
    Start                 : int 
    End                   : int 
    Pre                   : string 
    Post                  : string 
    TranslationTable      : TranslationTable
    RowVersion            : DateTime 
    PeptideEvidenceParams : List<PeptideEvidenceParam>
    UserParam             : List<UserParam>
    }

///Params of PeptideEvidence.
and [<CLIMutable>] 
    PeptideEvidenceParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : PeptideEvidence
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime 
    }

///Reference to the PeptideEvidence element identified.
and [<CLIMutable>] 
    PeptideEvidenceRef =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                    : int
    PeptideEvidence       : PeptideEvidence
    RowVersion            : DateTime 
    }

///Peptide evidence on which this ProteinHypothesis is based by reference to a PeptideEvidence element.
and [<CLIMutable>] 
    PeptideHypothesis =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                            : int
    PeptideEvidenceRef            : PeptideEvidenceRef
    SpectrumIdentificationItemRef : SpectrumIdentificationItemRef
    RowVersion                    : DateTime  
    //PeptideHypothesisParams      : List<PeptideHypothesisParam>
    }

//and [<CLIMutable>] 
//    PeptideHypothesisParam =
//    {
//    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
//    ID               : int
//    FKParamContainer : PeptideHypothesis
//    [<RequiredAttribute()>]
//    Term             : Term
//    Unit             : Term
//    Value            : string
//    RowVersion       : DateTime 
//    }

///Aminoacid sequence of a (poly-) peptide. If substitutions are found, the original sequence should be reported.
and [<CLIMutable>] 
    PeptideSequence =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                           : int
    Sequence                     : string
    RowVersion                   : DateTime  
    //PeptideHypothesisParams      : List<PeptideHypothesisParam>
    }

///person's name and contact details.
and [<CLIMutable>] 
    Person =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID             : int
    FirstName      : string 
    LastName       : string 
    MiddleName     : string
    Affiliation    : Affiliation
    //Organization   : Organization
    RowVersion     : DateTime  
    PersonParams   : List<PersonParam>
    UserParam      : List<UserParam>
    }

///Params of Person.
and [<CLIMutable>] 
    PersonParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : Person
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime   
    }

///A set of logically related results from a protein detection.
and [<CLIMutable>] 
    ProteinAmbiguityGroup =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                          : int
    Name                        : string 
    ProteinDetectionHypothesis  : ProteinDetectionHypothesis
    RowVersion                  : DateTime
    ProteinAmbiguityGroupParams : List<ProteinAmbiguityGroupParam>
    UserParam                   : List<UserParam>
    }

///Params of ProteinAmbiguityGroup.
and [<CLIMutable>] 
    ProteinAmbiguityGroupParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : ProteinAmbiguityGroup
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime     
    }

///An Analysis which assembles a set of peptides to proteins.
and [<CLIMutable>] 
    ProteinDetection =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>]
    ID                          : int
    Name                        : string
    ProteinDetectionList        : ProteinDetectionList
    ProteinDetectionProtocol   : ProteinDetectionProtocol
    InputSpectrumIdentification : InputSpectrumIdentification
    RowVersion                  : DateTime
    //ProteinDetectionParams      : List<ProteinDetectionParam>
    }

//and [<CLIMutable>] 
//    ProteinDetectionParam =
//    {
//    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
//    ID               : int
//    FKParamContainer : ProteinDetection
//    [<RequiredAttribute()>]
//    Term             : Term
//    Unit             : Term
//    Value            : string
//    RowVersion       : DateTime
//    }

///A single result of the ProteinDetection analysis.
and [<CLIMutable>] 
    ProteinDetectionHypothesis =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                               : int
    Name                             : string
    DBSequence                       : DBSequence
    PassThreshold                    : bool
    PeptideHypothesis                : PeptideHypothesis
    RowVersion                       : DateTime  
    ProteinDetectionHypothesisParams : List<ProteinDetectionHypothesisParam>
    UserParam                        : List<UserParam>
    }

///Params of ProteinDetectionHypothesis.
and [<CLIMutable>] 
    ProteinDetectionHypothesisParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : ProteinDetectionHypothesis
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime
    }

///The protein list resulting from a protein detection process.
and [<CLIMutable>] 
    ProteinDetectionList =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                         : int
    Name                       : string
    ProteinAmbiguityGroup      : ProteinAmbiguityGroup
    RowVersion                 : DateTime
    ProteinDetectionListParams : List<ProteinDetectionListParam>
    UserParam                  : List<UserParam>
    }

///Params of ProteindetectionList.
and [<CLIMutable>] 
    ProteinDetectionListParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : ProteinDetectionList
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime
    }

///The parameters and settings of a ProteinDetection process.
and [<CLIMutable>] 
    ProteinDetectionProtocol =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                             : int
    Name                           : string 
    AnalysisSoftware               : AnalysisSoftware
    AnalysisParams                 : AnalysisParams
    Threshold                      : Threshold
    RowVersion                     : DateTime
    //ProteinDetectionProtocolParams : List<ProteinDetectionProtocolParam>
    }

//and [<CLIMutable>] 
//    ProteinDetectionProtocolParam =
//    {
//    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
//    ID               : int
//    FKParamContainer : ProteinDetectionProtocol
//    [<RequiredAttribute()>]
//    Term             : Term
//    Unit             : Term
//    Value            : string
//    RowVersion       : DateTime  
//    }

///The Provider of the mzIdentML record in terms of the contact and software.
and [<CLIMutable>] 
    Provider =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    Name             : string 
    AnalysisSoftware : AnalysisSoftware
    ContactRole      : ContactRole
    RowVersion       : DateTime
    }

///The specification of a single residue within the mass table.
and [<CLIMutable>] 
    Residue =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID         : int
    Sequence   : string
    Mass       : float
    RowVersion : DateTime
    }

///The roles the Contact fills.
and [<CLIMutable>] 
    Role =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID         : int
    Name       : string //self added
    RowVersion : DateTime
    RoleParams : List<RoleParam>
    }

///Params of Role.
and [<CLIMutable>] 
    RoleParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : Role
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime  
    }

///A description of the sample analysed by mass spectrometry using CVParams or UserParams.
and [<CLIMutable>] 
    Sample =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID           : int
    Name         : string 
    ContactRole  : ContactRole
    SubSample    : SubSample
    RowVersion   : DateTime
    SampleParams : List<SampleParam>
    UserParams   : List<UserParam>
    }

///Params of Sample.
and [<CLIMutable>] 
    SampleParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : Sample
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime  
    }

//Added because it exists in the original document and is referred multiple times in the code.
and [<CLIMutable>] 
    SearchDatabase =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                          : int
    Name                        : string 
    Location                    : string //Location of the datafile, commonly an URL
    NumDatabaseSequences        : int
    NumResidues                 : int
    ReleaseDate                 : DateTime
    Version                     : string
    ExternalFormatDocumentation : ExternalFormatDocumentation
    FileFormat                  : FileFormat
    DatabaseName                : DatabaseName
    RowVersion                  : DateTime
    SearchDatabaseParams        : List<SearchDatabaseParam>
    }

///Params of SearchDatabase.
and [<CLIMutable>] 
    SearchDatabaseParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : SearchDatabaseParam
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime  
    }

///One of the search databases used.
and [<CLIMutable>] 
    SearchDatabaseRef =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID             : int
    SearchDatabase : SearchDatabase
    RowVersion     : DateTime
    }

///Specification of a search modification as parameter for a spectra search. Contains the name of the modification, the mass, the specificity and whether it is a static modification.
and [<CLIMutable>] 
    SearchDatabaseModification =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                               : int
    fixedMod                         : bool
    massDelta                        : float
    Residues                         : string
    SpecificityRules                 : SpecificityRules
    RowVersion                       : DateTime
    SearchDatabaseModificationParams : List<SearchDatabaseModificationParam>
    }

///Params of SearchDatabaseModification
and [<CLIMutable>] 
    SearchDatabaseModificationParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                     : int
    FKParamContainer       : SearchDatabaseModification
    [<RequiredAttribute()>]
    Term                   : Term
    Unit                   : Term
    Value                  : string
    RowVersion             : DateTime
    }

///Specification of a search modification as parameter for a spectra search. Contains the name of the modification, the mass, the specificity and whether it is a static modification.
and [<CLIMutable>] 
    SearchModification =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                       : int
    FixedMod                 : bool
    MassDelta                : float
    Residues                 : string
    SpecificityRules         : SpecificityRules
    RowVersion               : DateTime
    SearchModificationParams : List<SearchModification>
    }

///Params of SearchModification
and [<CLIMutable>] 
    SearchModificationParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                     : int
    FKParamContainer       : SearchModification
    [<RequiredAttribute()>]
    Term                   : Term
    Unit                   : Term
    Value                  : string
    RowVersion             : DateTime
    }

///The type of search performed e.g. PMF, Tag searches, MS-MS
and [<CLIMutable>] 
    SearchType =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID          : int
    Term        : Term
    UserParam   : UserParam
    RowVersion  : DateTime
    }

///The actual sequence of amino acids or nucleic acid.
and [<CLIMutable>] 
    Seq =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID          : int
    Sequence    : string
    RowVersion  : DateTime
    }

///The collection of sequences (DBSequence or Peptide) identified and their relationship between each other (PeptideEvidence) to be referenced elsewhere in the results.
and [<CLIMutable>] 
    SequenceCollection =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID              : int
    DBSequence      : DBSequence
    Peptide         : Peptide
    PeptideEvidence : PeptideEvidence
    RowVersion      : DateTime
    }

///Regular expression for specifying the enzyme cleavage site.
and [<CLIMutable>] 
    SiteRegexp =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID         : int
    Sequence   : string
    RowVersion : DateTime
    }

///Name of a SoftwarePackage
and [<CLIMutable>] 
    SoftwareName =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID         : int
    Name       : string
    //Term       : Term
    //UserParam  : UserParam
    RowVersion : DateTime
    }

///A file from which this mzIdentML instance was created.
and [<CLIMutable>] 
    SourceFile =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                          : int
    Name                        : string
    Location                    : string
    ExternalFormatDocumentation : ExternalFormatDocumentation
    FileFormat                  : FileFormat
    RowVersion                  : DateTime
    SourceFileParams            : List<SourceFileParam>
    UserParam                   : List<UserParam>
    }

///Params of SourceFile
and [<CLIMutable>] 
    SourceFileParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                     : int
    FKParamContainer       : SourceFile
    [<RequiredAttribute()>]
    Term                   : Term
    Unit                   : Term
    Value                  : string
    RowVersion             : DateTime
    }

///The specificity rules of the searched modification including for example the probability of a modification's presence or peptide or protein termini. Standard fixed or variable status should be provided by the attribute fixedMod.
and [<CLIMutable>] 
    SpecificityRules =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID         : int
    Term       : Term
    RowVersion : DateTime
    }

///A data set containing spectra data (consisting of one or more spectra).
and [<CLIMutable>] 
    SpectraData =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                          : int
    Name                        : string 
    Location                    : string //Location of the datafile, commonly an URL
    ExternalFormatDocumentation : ExternalFormatDocumentation
    FileFormat                  : FileFormat
    SpectrumIDFormat            : SpectrumIDFormat
    RowVersion                  : DateTime
    //SpectraDataParams : List<SpectraDataParam>
    }

//and [<CLIMutable>] 
//    SpectraDataParam =
//    {
//    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
//    ID                     : int
//    FKParamContainer       : SpectraData
//    [<RequiredAttribute()>]
//    Term                   : Term
//    Unit                   : Term
//    Value                  : string
//    RowVersion             : DateTime
//    }


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///An Analysis which tries to identify peptides in input spectra, referencing the database searched, the input spectra, the output results and the protocol that is run.
and [<CLIMutable>] 
    SpectrumIdentification =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                              : int
    Name                            : string 
    ActivityDate                    : DateTime
    SpectrumIdentificationList      : int     //Refers to SpectrumidentificationList normally
    SpectrumIdentificationProtocol : int     //Refers to SpectrumIdentificationProtocol normally
    InputSpectra                    : InputSpectra
    SearchDatabaseRef               : SearchDatabaseRef
    RowVersion                      : DateTime
    //SpectrumIdentificationParams      : List<SpectrumIdentificationParam>
    }

//and [<CLIMutable>] 
//    SpectrumIdentificationParam =
//    {
//    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
//    ID                     : int
//    FKParamContainer       : SpectrumIdentification
//    [<RequiredAttribute()>]
//    Term                   : Term
//    Unit                   : Term
//    Value                  : string
//    RowVersion             : DateTime
//    }

///An identification of a single (poly)peptide, resulting from querying an input spectra, along with the set of confidence values for that identification.
and [<CLIMutable>] 
    SpectrumIdentificationItem =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                               : int
    Name                             : string
    SpectrumIdentificationResult     : SpectrumIdentificationResult
    Sample                           : Sample          
    Peptide                          : Peptide
    MassTable                        : MassTable 
    PassThreshold                    : bool
    Rank                             : int 
    CalculatedMassToCharge           : float 
    ExperimentalMassToCharge         : float
    ChargeState                      : int
    CalculatedIP                     : float 
    Fragmentation                    : Fragmentation
    PeptideEvidenceRef               : PeptideEvidenceRef
    RowVersion                       : DateTime
    SpectrumIdentificationItemParams : List<SpectrumIdentificationItemParam>
    UserParam                        : List<UserParam>
    }

///Params of SpectrumIdentification.
and [<CLIMutable>] 
    SpectrumIdentificationItemParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : SpectrumIdentificationItem
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime 
    }

///An identification of a single (poly)peptide, resulting from querying an input spectra, along with the set of confidence values for that identification.
and [<CLIMutable>] 
    SpectrumIdentificationItemRef =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                         : int
    SpectrumIdentificationItem : SpectrumIdentificationItem
    RowVersion                 : DateTime
    }

///Represents the set of all search results from SpectrumIdentification.
and [<CLIMutable>] 
    SpectrumIdentificationList =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                               : int
    Name                             : string 
    NumSequencesSearched             : int
    FragmentationTable               : FragmentationTable
    SpectrumIdentificationResult     : SpectrumIdentificationResult
    RowVersion                       : DateTime
    SpectrumIdentificationListParams : List<SpectrumIdentificationListParam>
    UserParam                        : List<UserParam>
    }

///Params of SpectrumIdentificationList.
and [<CLIMutable>] 
    SpectrumIdentificationListParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : SpectrumIdentificationList
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime 
    }

///The parameters and settings of a SpectrumIdentification analysis.
and [<CLIMutable>] 
    SpectrumIdentificationProtocol =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                                   : int
    Name                                 : string 
    AnalysisSoftware                     : AnalysisSoftware
    SearchType                           : SearchType
    AdditionalSearchparams               : AdditionalSearchparams
    ModificationParams                   : ModificationParams
    Enzymes                              : Enzymes
    MassTable                            : MassTable
    FragmentTolerance                    : FragmentTolerance
    ParentTolerance                      : ParentTolerance
    Threshold                            : Threshold
    DatabaseFilters                      : DatabaseFilters
    DatabaseTranslation                  : DatabaseTranslation
    RowVersion                           : DateTime 
    //SpectrumIdentificationProtocolParams : List<SpectrumIdentificationProtocolParam>
    }

//and [<CLIMutable>] 
//    SpectrumIdentificationProtocolParam =
//    {
//    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
//    ID               : int
//    FKParamContainer : SpectrumIdentificationProtocol
//    [<RequiredAttribute()>]
//    Term             : Term
//    Unit             : Term
//    Value            : string
//    RowVersion       : DateTime 
//    }

///All identifications made from searching one spectrum.
and [<CLIMutable>] 
    SpectrumIdentificationResult =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                                 : int
    Name                               : string
    SpectrumID                         : int    //Refers to SpectrumID, unique in the SpectraData for the specific Spectrum
    SpectraData                        : SpectraData       
    SpectrumIdentificationItem         : SpectrumIdentificationItem 
    RowVersion                         : DateTime 
    SpectrumIdentificationResultParams : List<SpectrumIdentificationResultParam>
    UserParam                          : UserParam
    }

and [<CLIMutable>] 
    SpectrumIdentificationResultParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : SpectrumIdentificationResult
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime    
    }

///The format of the spectrum identifier within the source file.
and [<CLIMutable>] 
    SpectrumIDFormat =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID         : int
    Term       : Term
    RowVersion : DateTime 
    }

///References to the individual component samples within a mixed parent sample.
and [<CLIMutable>] 
    SubSample =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID         : int
    Sample     : Sample
    RowVersion : DateTime 
    }

///A modification where one residue is substituted by another (amino acid change).
and [<CLIMutable>] 
    SubstitutionModification =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                    : int
    Location              : int
    AvgMassDelta          : float
    MonoisotopicMassDelta : float
    OriginalResidue       : string
    ReplacementResidue    : string
    RowVersion            : DateTime 
    }

and [<CLIMutable>] 
    Term =
    {
    ID             : string
    Name           : string
    Ontology       : Ontology
    RowVersion     : DateTime 
    }

and [<CLIMutable>] 
    TermRelationShip =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    Term             : Term
    RelationShipType : string
    RelatedTerm      : Term
    RowVersion       : DateTime     
    }

and [<CLIMutable>] 
    TermTag =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID         : int
    Term       : Term
    Name       : string
    Value      : string
    RowVersion : DateTime 
    }

///The threshold(s) applied to determine that a result is significant. If multiple terms are used it is assumed that all conditions are satisfied by the passing results.
and [<CLIMutable>] 
    Threshold =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID         : int
    Term       : Term
    UserParam  : UserParam
    RowVersion : DateTime 
    }
//Added because it is part of the original document and refferd to in the code
and [<CLIMutable>] 
    TranslationTable =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID                : int
    Name              : string 
    TranslationParams : List<TranslationParam>
    }

and [<CLIMutable>] 
    TranslationParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    FKParamContainer : TranslationTable
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    Value            : string
    RowVersion       : DateTime    
    }

and [<CLIMutable>] 
    UserParam =
    {
    [<DatabaseGenerated(DatabaseGeneratedOption.Identity)>] 
    ID               : int
    [<RequiredAttribute()>]
    Term             : Term
    Unit             : Term
    UnitName         : string
    Value            : string
    RowVersion       : DateTime    
    }

///Defining Context of DB
type DBMSContext() =
    inherit DbContext()
    
    [<DefaultValue>] 
    val mutable m_analysisSoftware : DbSet<AnalysisSoftware>
    member public this.AnalysisSoftware with get() = this.m_analysisSoftware
                                                and set value = this.m_analysisSoftware <- value

    [<DefaultValue>] 
    val mutable m_analysisSoftwareParam : DbSet<AnalysisSoftwareParam>
    member public this.AnalysisSoftwareParam with get() = this.m_analysisSoftwareParam
                                                and set value = this.m_analysisSoftwareParam <- value
    
    [<DefaultValue>] 
    val mutable m_dbSequence : DbSet<DBSequence>
    member public this.DBSequence with get() = this.m_dbSequence
                                                and set value = this.m_dbSequence <- value

    [<DefaultValue>] 
    val mutable m_dbSequenceParam : DbSet<DBSequenceParam>
    member public this.DBSequenceParam with get() = this.m_dbSequenceParam
                                                and set value = this.m_dbSequenceParam <- value

    [<DefaultValue>] 
    val mutable m_masstable : DbSet<MassTable>
    member public this.Masstable with get() = this.m_masstable
                                                and set value = this.m_masstable <- value

    [<DefaultValue>] 
    val mutable m_masstableParam : DbSet<MassTableParam>
    member public this.MasstableParam with get() = this.m_masstableParam
                                                and set value = this.m_masstableParam <- value

    [<DefaultValue>] 
    val mutable m_modification : DbSet<Modification>
    member public this.Modification with get() = this.m_modification
                                                and set value = this.m_modification <- value

    [<DefaultValue>] 
    val mutable m_modificationParam : DbSet<ModificationParam>
    member public this.ModificationParam with get() = this.m_modificationParam
                                                and set value = this.m_modificationParam <- value

    [<DefaultValue>] 
    val mutable m_modLocation : DbSet<ModLocation>
    member public this.ModLocation with get() = this.m_modLocation
                                                and set value = this.m_modLocation <- value

    [<DefaultValue>] 
    val mutable m_modLocationParam : DbSet<ModLocationParam>
    member public this.ModLocationParam with get() = this.m_modLocationParam
                                                and set value = this.m_modLocationParam <- value

    [<DefaultValue>] 
    val mutable m_ontology : DbSet<Ontology>
    member public this.Ontology with get() = this.m_ontology
                                                and set value = this.m_ontology <- value

    [<DefaultValue>] 
    val mutable m_organization : DbSet<Organization>
    member public this.Organization with get() = this.m_organization
                                                and set value = this.m_organization <- value

    [<DefaultValue>] 
    val mutable m_organizationParam : DbSet<OrganizationParam>
    member public this.OrganizationParam with get() = this.m_organizationParam
                                                and set value = this.m_organizationParam <- value

    [<DefaultValue>] 
    val mutable m_parent : DbSet<Parent>
    member public this.Parent with get() = this.m_parent
                                                and set value = this.m_parent <- value

    [<DefaultValue>] 
    val mutable m_peptide : DbSet<Peptide>
    member public this.Peptide with get() = this.m_peptide
                                                and set value = this.m_peptide <- value

    [<DefaultValue>] 
    val mutable m_peptideParam : DbSet<PeptideParam>
    member public this.PeptideParam with get() = this.m_peptideParam
                                                and set value = this.m_peptideParam <- value

    [<DefaultValue>] 
    val mutable m_peptideEvidence : DbSet<PeptideEvidence>
    member public this.PeptideEvidence with get() = this.m_peptideEvidence
                                                and set value = this.m_peptideEvidence <- value

    [<DefaultValue>] 
    val mutable m_peptideEvidenceParam : DbSet<PeptideEvidenceParam>
    member public this.PeptideEvidenceParam with get() = this.m_peptideEvidenceParam
                                                and set value = this.m_peptideEvidenceParam <- value

    [<DefaultValue>] 
    val mutable m_peptideHypothesis : DbSet<PeptideHypothesis>
    member public this.PeptideHypothesis with get() = this.m_peptideHypothesis
                                                and set value = this.m_peptideHypothesis <- value

    [<DefaultValue>] 
    val mutable m_peptideHypothesisParam : DbSet<PeptideHypothesisParam>
    member public this.PeptideHypothesisParam with get() = this.m_peptideHypothesisParam
                                                and set value = this.m_peptideHypothesisParam <- value

    [<DefaultValue>] 
    val mutable m_person : DbSet<Person>
    member public this.Person with get() = this.m_person
                                                and set value = this.m_person <- value

    [<DefaultValue>] 
    val mutable m_personParam : DbSet<Person>
    member public this.PersonParam with get() = this.m_personParam
                                                and set value = this.m_personParam <- value

    [<DefaultValue>] 
    val mutable m_proteinAmbiguityGroup : DbSet<ProteinAmbiguityGroup>
    member public this.ProteinAmbiguityGroup with get() = this.m_proteinAmbiguityGroup
                                                and set value = this.m_proteinAmbiguityGroup <- value

    [<DefaultValue>] 
    val mutable m_proteinAmbiguityGroupParam : DbSet<ProteinAmbiguityGroupParam>
    member public this.ProteinAmbiguityGroupParam with get() = this.m_proteinAmbiguityGroupParam
                                                    and set value = this.m_proteinAmbiguityGroupParam <- value

    [<DefaultValue>] 
    val mutable m_proteinDetection : DbSet<ProteinDetection>
    member public this.ProteinDetection with get() = this.m_proteinDetection
                                                    and set value = this.m_proteinDetection <- value

    [<DefaultValue>] 
    val mutable m_proteinDetectionParam : DbSet<ProteinDetectionParam>
    member public this.ProteinDetectionParam with get() = this.m_proteinDetectionParam
                                                    and set value = this.m_proteinDetectionParam <- value

    [<DefaultValue>] 
    val mutable m_proteinDetectionHypothesis : DbSet<ProteinDetectionHypothesis>
    member public this.ProteinDetectionHypothesis with get() = this.m_proteinDetectionHypothesis
                                                    and set value = this.m_proteinDetectionHypothesis <- value

    [<DefaultValue>] 
    val mutable m_proteinDetectionHypothesisParam : DbSet<ProteinDetectionHypothesisParam>
    member public this.ProteinDetectionHypothesisParam with get() = this.m_proteinDetectionHypothesisParam
                                                       and set value = this.m_proteinDetectionHypothesisParam <- value

    [<DefaultValue>] 
    val mutable m_proteinDetectionList : DbSet<ProteinDetectionList>
    member public this.ProteinDetectionList with get() = this.m_proteinDetectionList
                                                    and set value = this.m_proteinDetectionList <- value

    [<DefaultValue>] 
    val mutable m_proteinDetectionListParam : DbSet<ProteinDetectionListParam>
    member public this.ProteinDetectionListParam with get() = this.m_proteinDetectionListParam
                                                    and set value = this.m_proteinDetectionListParam <- value

    [<DefaultValue>] 
    val mutable m_proteinDetectionProtocol : DbSet<ProteinDetectionProtocol>
    member public this.ProteinDetectionProtocol with get() = this.m_proteinDetectionProtocol
                                                    and set value = this.m_proteinDetectionProtocol <- value

    [<DefaultValue>] 
    val mutable m_proteinDetectionProtocolParam : DbSet<ProteinDetectionProtocolParam>
    member public this.ProteinDetectionProtocolParam with get() = this.m_proteinDetectionProtocolParam
                                                        and set value = this.m_proteinDetectionProtocolParam <- value

    [<DefaultValue>] 
    val mutable m_sample : DbSet<Sample>
    member public this.Sample with get() = this.m_sample
                                                        and set value = this.m_sample <- value

    [<DefaultValue>] 
    val mutable m_sampleParam : DbSet<SampleParam>
    member public this.SampleParam with get() = this.m_sampleParam
                                                        and set value = this.m_sampleParam <- value

    [<DefaultValue>] 
    val mutable m_searchDatabase : DbSet<SearchDatabase>
    member public this.SearchDatabase with get() = this.m_searchDatabase
                                            and set value = this.m_searchDatabase <- value

    [<DefaultValue>] 
    val mutable m_searchDatabaseParam : DbSet<SearchDatabaseParam>
    member public this.SearchDatabaseParam with get() = this.m_searchDatabaseParam
                                                and set value = this.m_searchDatabaseParam <- value

    [<DefaultValue>] 
    val mutable m_spectraData : DbSet<SpectraData>
    member public this.SpectraData with get() = this.m_spectraData
                                                and set value = this.m_spectraData <- value

    [<DefaultValue>] 
    val mutable m_spectraDataParam : DbSet<SpectraDataParam>
    member public this.SpectraDataParam with get() = this.m_spectraDataParam
                                                and set value = this.m_spectraDataParam <- value

    [<DefaultValue>] 
    val mutable m_spectrumIdentification : DbSet<SpectrumIdentification>
    member public this.SpectrumIdentification with get() = this.m_spectrumIdentification
                                                    and set value = this.m_spectrumIdentification <- value

    [<DefaultValue>] 
    val mutable m_spectrumIdentificationParam : DbSet<SpectrumIdentificationParam>
    member public this.SpectrumIdentificationParam with get() = this.m_spectrumIdentificationParam
                                                    and set value = this.m_spectrumIdentificationParam <- value

    [<DefaultValue>] 
    val mutable m_spectrumIdentificationItem : DbSet<SpectrumIdentificationItem>
    member public this.SpectrumIdentificationItem with get() = this.m_spectrumIdentificationItem
                                                    and set value = this.m_spectrumIdentificationItem <- value

    [<DefaultValue>] 
    val mutable m_spectrumIdentificationItemParam : DbSet<SpectrumIdentificationItemParam>
    member public this.SpectrumIdentificationItemParam with get() = this.m_spectrumIdentificationItemParam
                                                       and set value = this.m_spectrumIdentificationItemParam <- value

    [<DefaultValue>] 
    val mutable m_spectrumIdentificationList : DbSet<SpectrumIdentificationList>
    member public this.SpectrumIdentificationList with get() = this.m_spectrumIdentificationList
                                                    and set value = this.m_spectrumIdentificationList <- value

    [<DefaultValue>] 
    val mutable m_spectrumIdentificationListParam : DbSet<SpectrumIdentificationListParam>
    member public this.SpectrumIdentificationListParam with get() = this.m_spectrumIdentificationListParam
                                                        and set value = this.m_spectrumIdentificationListParam <- value

    [<DefaultValue>] 
    val mutable m_spectrumIdentificationProtocol : DbSet<SpectrumIdentificationProtocol>
    member public this.SpectrumIdentificationProtocol with get() = this.m_spectrumIdentificationProtocol
                                                        and set value = this.m_spectrumIdentificationProtocol <- value

    [<DefaultValue>] 
    val mutable m_spectrumIdentificationProtocolParam : DbSet<SpectrumIdentificationProtocolParam>
    member public this.SpectrumIdentificationProtocolParam with get() = this.m_spectrumIdentificationProtocolParam
                                                            and set value = this.m_spectrumIdentificationProtocolParam <- value

    [<DefaultValue>] 
    val mutable m_spectrumIdentificationResult : DbSet<SpectrumIdentificationResult>
    member public this.SpectrumIdentificationResult with get() = this.m_spectrumIdentificationResult
                                                    and set value = this.m_spectrumIdentificationResult <- value

    [<DefaultValue>] 
    val mutable m_spectrumIdentificationResultParam : DbSet<SpectrumIdentificationResultParam>
    member public this.SpectrumIdentificationResultParam with get() = this.m_spectrumIdentificationResultParam
                                                            and set value = this.m_spectrumIdentificationResultParam <- value

    [<DefaultValue>] 
    val mutable m_term : DbSet<Term>
    member public this.Term with get() = this.m_term
                                        and set value = this.m_term <- value

    [<DefaultValue>] 
    val mutable m_termRelationShip : DbSet<TermRelationShip>
    member public this.TermRelationShip with get() = this.m_termRelationShip
                                        and set value = this.m_termRelationShip <- value

    [<DefaultValue>] 
    val mutable m_termTag : DbSet<TermTag>
    member public this.TermTag with get() = this.m_termTag
                                        and set value = this.m_termTag <- value

    [<DefaultValue>] 
    val mutable m_translation : DbSet<Translation>
    member public this.Translation with get() = this.m_translation
                                        and set value = this.m_translation <- value

    [<DefaultValue>] 
    val mutable m_translationParam : DbSet<TranslationParam>
    member public this.TranslationParam with get() = this.m_translationParam
                                        and set value = this.m_translationParam <- value

    override this.OnConfiguring (optionsBuilder :  DbContextOptionsBuilder) =
        let fileDir = __SOURCE_DIRECTORY__ 
        let dbPath = fileDir + "\Ontologies_Terms\MSDatenbank.db"
        optionsBuilder.EnableSensitiveDataLogging() |> ignore
        optionsBuilder.UseSqlite(@"Data Source="+ dbPath) |> ignore

///Define functions to create  for tables of DB////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
module InsertStatements =

    let createAnalysisSoftware name analysisSoftwareParams =
        {
         AnalysisSoftware.ID                     = 0
         AnalysisSoftware.Name                   = name
         AnalysisSoftware.RowVersion             = DateTime.Now.Date
         AnalysisSoftware.AnalysisSoftwareParams = analysisSoftwareParams
        }

    let createAnalysisSoftwareParam analysisSoftware value term unit =
        {
         AnalysisSoftwareParam.ID               = 0
         AnalysisSoftwareParam.FKParamContainer = analysisSoftware
         AnalysisSoftwareParam.Value            = value
         AnalysisSoftwareParam.Term             = term
         AnalysisSoftwareParam.Unit             = unit
         AnalysisSoftwareParam.RowVersion       = DateTime.Now.Date
        }

    let createDBSequence name accession searchDB dBSequenceParams =
        {
         DBSequence.ID               = 0
         DBSequence.Name             = name
         DBSequence.Accession        = accession
         DBSequence.SearchDB         = searchDB
         DBSequence.RowVersion       = DateTime.Now.Date
         DBSequence.DBSequenceParams = dBSequenceParams
        }

    let createDBSequenceParam dBSequence value term unit =
        {
         DBSequenceParam.ID               = 0
         DBSequenceParam.FKParamContainer = dBSequence
         DBSequenceParam.Value            = value
         DBSequenceParam.Term             = term
         DBSequenceParam.Unit             = unit
         DBSequenceParam.RowVersion       = DateTime.Now.Date
        }

    let createMassTable name mSLevel massTableParams =
        {
         MassTable.ID              = 0
         MassTable.Name            = name
         MassTable.MSLevel         = mSLevel
         MassTable.RowVersion      = DateTime.Now.Date
         MassTable.MassTableParams = massTableParams
        }

    let createMassTableParam massTable value term unit =
        {
         MassTableParam.ID               = 0
         MassTableParam.FKParamContainer = massTable
         MassTableParam.Value            = value
         MassTableParam.Term             = term
         MassTableParam.Unit             = unit
         MassTableParam.RowVersion       = DateTime.Now.Date
        }

    let createModification name avgMassDelta monoisotopicMassDelta residues modLocation modificationParams =
        {
         Modification.ID                    = 0
         Modification.Name                  = name
         Modification.AvgMassDelta          = avgMassDelta
         Modification.MonoisotopicMassDelta = monoisotopicMassDelta
         Modification.Residues              = residues
         Modification.ModLocation           = modLocation
         Modification.RowVersion            = DateTime.Now.Date
         Modification.ModificationParams    = modificationParams
        }

    let createModificationParam modification value term unit =
        {
         ModificationParam.ID               = 0
         ModificationParam.FKParamContainer = modification
         ModificationParam.Value            = value
         ModificationParam.Term             = term
         ModificationParam.Unit             = unit
         ModificationParam.RowVersion       = DateTime.Now.Date
        }

    let createModLocation modification location peptide residue modlocationParams =
        {
         ModLocation.ID                = 0
         ModLocation.Modification      = modification
         ModLocation.Location          = location
         ModLocation.Peptide           = peptide
         ModLocation.Residue           = residue
         ModLocation.RowVersion        = DateTime.Now.Date
         ModLocation.ModLocationParams = modlocationParams
        }

    let createModLocationParam modLocation value term unit =
        {
         ModLocationParam.ID               = 0
         ModLocationParam.FKParamContainer = modLocation
         ModLocationParam.Value            = value
         ModLocationParam.Term             = term
         ModLocationParam.Unit             = unit
         ModLocationParam.RowVersion       = DateTime.Now.Date
        }

    let createOntology name params terms =
        {
         Ontology.ID             = 0
         Ontology.Name           = name
         Ontology.RowVersion     = DateTime.Now.Date
         Ontology.OntologyParams = params
         Ontology.Terms          = terms
        }

    let createOntologyParam ontology value term unit =
        {
         OntologyParam.ID               = 0
         OntologyParam.FKParamContainer = ontology
         OntologyParam.Value            = value
         OntologyParam.Term             = term
         OntologyParam.Unit             = unit
         OntologyParam.RowVersion       = DateTime.Now.Date
        }

    let createOrganization name parent organizationParams =
        {
         Organization.ID                 = 0
         Organization.Name               = name
         Organization.Parent             = parent
         Organization.RowVersion         = DateTime.Now.Date
         Organization.OrganizationParams = organizationParams
        }

    let createOrganizationParam organization value term unit =
        {
         OrganizationParam.ID               = 0
         OrganizationParam.FKParamContainer = organization
         OrganizationParam.Value            = value
         OrganizationParam.Term             = term
         OrganizationParam.Unit             = unit
         OrganizationParam.RowVersion       = DateTime.Now.Date
        }

    let createParent name country organization parentParams =
        {
         Parent.ID           = 0
         Parent.Name         = name
         Parent.Country      = country
         Parent.Organization = organization
         Parent.RowVersion   = DateTime.Now.Date
         Parent.ParentParams = parentParams
        }

    let createParentParam parent value term unit =
        {
         ParentParam.ID               = 0
         ParentParam.FKParamContainer = parent
         ParentParam.Value            = value
         ParentParam.Term             = term
         ParentParam.Unit             = unit
         ParentParam.RowVersion       = DateTime.Now.Date
        }

    let createPeptide name sequence peptideParams =
        {
         Peptide.ID            = 0
         Peptide.Name          = name
         Peptide.Sequence      = sequence
         Peptide.RowVersion    = DateTime.Now.Date
         Peptide.PeptideParams = peptideParams
        }

    let createPeptideParam peptide value term unit =
        {
         PeptideParam.ID               = 0
         PeptideParam.FKParamContainer = peptide
         PeptideParam.Value            = value
         PeptideParam.Term             = term
         PeptideParam.Unit             = unit
         PeptideParam.RowVersion       = DateTime.Now.Date
        }

    let createPeptideEvidence peptide dBSequence isDecoy frame translation start ende pre post peptideEvidenceParams =
        {
         PeptideEvidence.ID                    = 0
         PeptideEvidence.Peptide               = peptide
         PeptideEvidence.DBSequence            = dBSequence
         PeptideEvidence.isDecoy               = isDecoy
         PeptideEvidence.Frame                 = frame
         PeptideEvidence.Translation           = translation
         PeptideEvidence.Start                 = start
         PeptideEvidence.End                   = ende
         PeptideEvidence.Pre                   = pre
         PeptideEvidence.Post                  = post
         PeptideEvidence.RowVersion            = DateTime.Now.Date
         PeptideEvidence.PeptideEvidenceParams = peptideEvidenceParams
        }

    let createPeptideEvidenceParam peptideEvidence value term unit =
        {
         PeptideEvidenceParam.ID               = 0
         PeptideEvidenceParam.FKParamContainer = peptideEvidence
         PeptideEvidenceParam.Value            = value
         PeptideEvidenceParam.Term             = term
         PeptideEvidenceParam.Unit             = unit
         PeptideEvidenceParam.RowVersion       = DateTime.Now.Date
        }

    let createPeptideHypothesis peptideDetectionHypothesisID peptideEvidence peptideHypothesisParams =
        {
         PeptideHypothesis.ID                           = 0
         PeptideHypothesis.PeptideDetectionHypothesisID = peptideDetectionHypothesisID
         PeptideHypothesis.PeptideEvidence              = peptideEvidence
         PeptideHypothesis.RowVersion                   = DateTime.Now.Date
         PeptideHypothesis.PeptideHypothesisParams      = peptideHypothesisParams
        }

    let createPeptideHypothesisParam peptideHypothesis value term unit =
        {
         PeptideHypothesisParam.ID               = 0
         PeptideHypothesisParam.FKParamContainer = peptideHypothesis
         PeptideHypothesisParam.Value            = value
         PeptideHypothesisParam.Term             = term
         PeptideHypothesisParam.Unit             = unit
         PeptideHypothesisParam.RowVersion       = DateTime.Now.Date
        }

    let createPerson firstName middleName lastName organization personenParams =
        {
         Person.ID           = 0
         Person.FirstName    = firstName
         Person.MiddleName   = middleName
         Person.LastName     = lastName
         Person.Organization = organization
         Person.RowVersion   = DateTime.Now.Date
         Person.PersonParams = personenParams
        }

    let createPersonParam person value term unit =
        {
         PersonParam.ID               = 0
         PersonParam.FKParamContainer = person
         PersonParam.Value            = value
         PersonParam.Term             = term
         PersonParam.Unit             = unit
         PersonParam.RowVersion       = DateTime.Now.Date
        }

    let createProteinAmbiguityGroup name proteinDetectionList proteinAmbiguityGroupParams =
        {
         ProteinAmbiguityGroup.ID                          = 0
         ProteinAmbiguityGroup.Name                        = name
         ProteinAmbiguityGroup.ProteinDetectionList        = proteinDetectionList
         ProteinAmbiguityGroup.RowVersion                  = DateTime.Now.Date
         ProteinAmbiguityGroup.ProteinAmbiguityGroupParams = proteinAmbiguityGroupParams
        }

    let createProteinAmbiguityGroupParam proteinAmbiguityGroup value term unit =
        {
         ProteinAmbiguityGroupParam.ID               = 0
         ProteinAmbiguityGroupParam.FKParamContainer = proteinAmbiguityGroup
         ProteinAmbiguityGroupParam.Value            = value
         ProteinAmbiguityGroupParam.Term             = term
         ProteinAmbiguityGroupParam.Unit             = unit
         ProteinAmbiguityGroupParam.RowVersion       = DateTime.Now.Date
        }

    let createProteinDetection name proteinDetectionProtocol proteinDetectionList proteinDetectionParams =
        {
         ProteinDetection.ID                        = 0
         ProteinDetection.Name                      = name
         ProteinDetection.ProteinDetectionProtocol = proteinDetectionProtocol
         ProteinDetection.ProteinDetectionList      = proteinDetectionList
         ProteinDetection.RowVersion                = DateTime.Now.Date
         ProteinDetection.ProteinDetectionParams    = proteinDetectionParams
        }

    let createProteinDetectionParam proteinDetection value term unit =
        {
         ProteinDetectionParam.ID               = 0
         ProteinDetectionParam.FKParamContainer = proteinDetection
         ProteinDetectionParam.Value            = value
         ProteinDetectionParam.Term             = term
         ProteinDetectionParam.Unit             = unit
         ProteinDetectionParam.RowVersion       = DateTime.Now.Date
        }

    let createProteinDetectionHypothesis name dBSequence passThreshold proteinAmbiguityGroup proteinDetectionHypothesisParams =
        {
         ProteinDetectionHypothesis.ID                               = 0
         ProteinDetectionHypothesis.Name                             = name
         ProteinDetectionHypothesis.DBSequence                       = dBSequence
         ProteinDetectionHypothesis.PassThreshold                    = passThreshold
         ProteinDetectionHypothesis.ProteinAmbiguityGroup            = proteinAmbiguityGroup
         ProteinDetectionHypothesis.RowVersion                       = DateTime.Now.Date
         ProteinDetectionHypothesis.ProteinDetectionHypothesisParams = proteinDetectionHypothesisParams
        }

    let createProteinDetectionHypothesisParam proteinDetectionHypothesis value term unit =
        {
         ProteinDetectionHypothesisParam.ID               = 0
         ProteinDetectionHypothesisParam.FKParamContainer = proteinDetectionHypothesis
         ProteinDetectionHypothesisParam.Value            = value
         ProteinDetectionHypothesisParam.Term             = term
         ProteinDetectionHypothesisParam.Unit             = unit
         ProteinDetectionHypothesisParam.RowVersion       = DateTime.Now.Date
        }

    let createProteinDetectionList name searchDB accession proteinDetectionListParams =
        {
         ProteinDetectionList.ID                         = 0
         ProteinDetectionList.Name                       = name
         ProteinDetectionList.SearchDB                   = searchDB
         ProteinDetectionList.Accession                  = accession
         ProteinDetectionList.RowVersion                 = DateTime.Now.Date
         ProteinDetectionList.ProteinDetectionListParams = proteinDetectionListParams
        }

    let createProteinDetectionListParam proteinDetectionList value term unit =
        {
         ProteinDetectionListParam.ID               = 0
         ProteinDetectionListParam.FKParamContainer = proteinDetectionList
         ProteinDetectionListParam.Value            = value
         ProteinDetectionListParam.Term             = term
         ProteinDetectionListParam.Unit             = unit
         ProteinDetectionListParam.RowVersion       = DateTime.Now.Date
        }

    let createProteinDetectionProtocol name analysisSoftware proteinDetectionProtocolParams =
        {
         ProteinDetectionProtocol.ID                             = 0
         ProteinDetectionProtocol.Name                           = name
         ProteinDetectionProtocol.AnalysisSoftware               = analysisSoftware
         ProteinDetectionProtocol.RowVersion                     = DateTime.Now.Date
         ProteinDetectionProtocol.ProteinDetectionProtocolParams = proteinDetectionProtocolParams
        }

    let createProteinDetectionProtocolParam proteinDetectionProtocol value term unit =
        {
         ProteinDetectionProtocolParam.ID               = 0
         ProteinDetectionProtocolParam.FKParamContainer = proteinDetectionProtocol
         ProteinDetectionProtocolParam.Value            = value
         ProteinDetectionProtocolParam.Term             = term
         ProteinDetectionProtocolParam.Unit             = unit
         ProteinDetectionProtocolParam.RowVersion       = DateTime.Now.Date
        }

    let createSample name sampleParams =
        {
         Sample.ID           = 0
         Sample.Name         = name
         Sample.RowVersion   = DateTime.Now.Date
         Sample.SampleParams = sampleParams
        }

    let createSampleParam sample value term unit =
        {
         SampleParam.ID               = 0
         SampleParam.FKParamContainer = sample
         SampleParam.Value            = value
         SampleParam.Term             = term
         SampleParam.Unit             = unit
         SampleParam.RowVersion       = DateTime.Now.Date
        }

    let createSearchDatabase name location searchDatabaseParams =
        {
         SearchDatabase.ID                   = 0
         SearchDatabase.Name                 = name
         SearchDatabase.Location             = location
         SearchDatabase.RowVersion           = DateTime.Now.Date
         SearchDatabase.SearchDatabaseParams = searchDatabaseParams
        }

    let createSearchDatabaseParam searchDatabase value term unit =
        {
         SearchDatabaseParam.ID               = 0
         SearchDatabaseParam.FKParamContainer = searchDatabase
         SearchDatabaseParam.Value            = value
         SearchDatabaseParam.Term             = term
         SearchDatabaseParam.Unit             = unit
         SearchDatabaseParam.RowVersion       = DateTime.Now.Date
        }

    let createSpectraData name location spectraDataParams =
        {
         SpectraData.ID                = 0
         SpectraData.Name              = name
         SpectraData.Location          = location
         SpectraData.RowVersion        = DateTime.Now.Date
         SpectraData.SpectraDataParams = spectraDataParams
        }

    let createSpectraDataParam spectraData value term unit =
        {
         SpectraDataParam.ID               = 0
         SpectraDataParam.FKParamContainer = spectraData
         SpectraDataParam.Value            = value
         SpectraDataParam.Term             = term
         SpectraDataParam.Unit             = unit
         SpectraDataParam.RowVersion       = DateTime.Now.Date
        }

    let createSpectrumIdentification name activityDate spectrumIdentificationList spectrumIdentificationProtocol spectrumIdentificationParams =
        {
         SpectrumIdentification.ID                              = 0
         SpectrumIdentification.Name                            = name
         SpectrumIdentification.ActivityDate                    = activityDate
         SpectrumIdentification.SpectrumIdentificationList      = spectrumIdentificationList
         SpectrumIdentification.SpectrumIdentificationProtocol = spectrumIdentificationProtocol
         SpectrumIdentification.RowVersion                      = DateTime.Now.Date
         SpectrumIdentification.SpectrumIdentificationParams    = spectrumIdentificationParams
        }

    let createSpectrumIdentificationParam spectrumIdentification value term unit =
        {
         SpectrumIdentificationParam.ID               = 0
         SpectrumIdentificationParam.FKParamContainer = spectrumIdentification
         SpectrumIdentificationParam.Value            = value
         SpectrumIdentificationParam.Term             = term
         SpectrumIdentificationParam.Unit             = unit
         SpectrumIdentificationParam.RowVersion       = DateTime.Now.Date
        }

    let createSpectrumIdentificationItem name peptide chargeState sample passThreshold fragmentation rank massTable calculatedIP calculatedMassToCharge experimentalMassToCharge spectrumIdentificationResult spectrumIdentificationItemParams =
        {
         SpectrumIdentificationItem.ID                               = 0
         SpectrumIdentificationItem.Name                             = name
         SpectrumIdentificationItem.Peptide                          = peptide
         SpectrumIdentificationItem.ChargeState                      = chargeState
         SpectrumIdentificationItem.Sample                           = sample
         SpectrumIdentificationItem.PassThreshold                    = passThreshold
         SpectrumIdentificationItem.Fragmentation                    = fragmentation
         SpectrumIdentificationItem.Rank                             = rank
         SpectrumIdentificationItem.MassTable                        = massTable
         SpectrumIdentificationItem.CalculatedIP                     = calculatedIP
         SpectrumIdentificationItem.CalculatedMassToCharge           = calculatedMassToCharge
         SpectrumIdentificationItem.ExperimentalMassToCharge         = experimentalMassToCharge
         SpectrumIdentificationItem.SpectrumIdentificationResult     = spectrumIdentificationResult
         SpectrumIdentificationItem.RowVersion                       = DateTime.Now.Date
         SpectrumIdentificationItem.SpectrumIdentificationItemParams = spectrumIdentificationItemParams
        }

    let createSpectrumIdentificationItemParam spectrumIdentificationItem value term unit =
        {
         SpectrumIdentificationItemParam.ID               = 0
         SpectrumIdentificationItemParam.FKParamContainer = spectrumIdentificationItem
         SpectrumIdentificationItemParam.Value            = value
         SpectrumIdentificationItemParam.Term             = term
         SpectrumIdentificationItemParam.Unit             = unit
         SpectrumIdentificationItemParam.RowVersion       = DateTime.Now.Date
        }

    let createSpectrumIdentificationList name numSequencesSearched spectrumIdentificationListParams =
        {
         SpectrumIdentificationList.ID                               = 0
         SpectrumIdentificationList.Name                             = name
         SpectrumIdentificationList.NumSequencesSearched             = numSequencesSearched
         SpectrumIdentificationList.RowVersion                       = DateTime.Now.Date
         SpectrumIdentificationList.SpectrumIdentificationListParams = spectrumIdentificationListParams
        }

    let createSpectrumIdentificationListParam spectrumIdentificationList value term unit =
        {
         SpectrumIdentificationListParam.ID               = 0
         SpectrumIdentificationListParam.FKParamContainer = spectrumIdentificationList
         SpectrumIdentificationListParam.Value            = value
         SpectrumIdentificationListParam.Term             = term
         SpectrumIdentificationListParam.Unit             = unit
         SpectrumIdentificationListParam.RowVersion       = DateTime.Now.Date
        }

    let createSpectrumIdentificationProtocol name analysisSoftware spectrumIdentificationProtocolParams =
        {
         SpectrumIdentificationProtocol.ID                                   = 0
         SpectrumIdentificationProtocol.Name                                 = name
         SpectrumIdentificationProtocol.AnalysisSoftware                     = analysisSoftware
         SpectrumIdentificationProtocol.RowVersion                           = DateTime.Now.Date
         SpectrumIdentificationProtocol.SpectrumIdentificationProtocolParams = spectrumIdentificationProtocolParams
        }

    let createSpectrumIdentificationProtocolParam spectrumIdentificationProtocol value term unit =
        {
         SpectrumIdentificationProtocolParam.ID               = 0
         SpectrumIdentificationProtocolParam.FKParamContainer = spectrumIdentificationProtocol
         SpectrumIdentificationProtocolParam.Value            = value
         SpectrumIdentificationProtocolParam.Term             = term
         SpectrumIdentificationProtocolParam.Unit             = unit
         SpectrumIdentificationProtocolParam.RowVersion       = DateTime.Now.Date
        }

    let createSpectrumIdentificationResult name spectrumID spectraData spectrumIdentificationList spectrumIdentificationResultParams =
        {
         SpectrumIdentificationResult.ID                                 = 0
         SpectrumIdentificationResult.Name                               = name
         SpectrumIdentificationResult.SpectrumID                         = spectrumID
         SpectrumIdentificationResult.SpectraData                        = spectraData
         SpectrumIdentificationResult.SpectrumIdentificationList         = spectrumIdentificationList
         SpectrumIdentificationResult.RowVersion                         = DateTime.Now.Date
         SpectrumIdentificationResult.SpectrumIdentificationResultParams = spectrumIdentificationResultParams
        }

    let createSpectrumIdentificationResultParam spectrumIdentificationResult value term unit =
        {
         SpectrumIdentificationResultParam.ID               = 0
         SpectrumIdentificationResultParam.FKParamContainer = spectrumIdentificationResult
         SpectrumIdentificationResultParam.Value            = value
         SpectrumIdentificationResultParam.Term             = term
         SpectrumIdentificationResultParam.Unit             = unit
         SpectrumIdentificationResultParam.RowVersion       = DateTime.Now.Date
        }

    let createTerm ontology (oboTerm : seq<Obo.OboTerm>) =
        new System
            .Collections
            .Generic
            .List<Term>(
            oboTerm
                |> Seq.map (fun item ->
                                        {
                                         Term.ID         = item.Id
                                         Term.Name       = item.Name
                                         Term.Ontology   = ontology
                                         Term.RowVersion = DateTime.Now.Date
                                        }
                           )   
                       )
    let createTermCustom id name ontology =
        {
         Term.ID = id
         Term.Name = name
         Term.Ontology = ontology
         Term.RowVersion = DateTime.Now.Date
        }

    let createTermRelationship term relationshipType relatedTerm =
        {
         TermRelationShip.ID               = 0
         TermRelationShip.Term             = term
         TermRelationShip.RelationShipType = relationshipType
         TermRelationShip.RelatedTerm      = relatedTerm
         TermRelationShip.RowVersion       = DateTime.Now.Date
        }

    let createTermTag name value term =
        {
         TermTag.ID         = 0
         TermTag.Name       = name
         TermTag.Value      = value
         TermTag.Term       = term
         TermTag.RowVersion = DateTime.Now.Date
        }

///Define reader for OboFile
let fromFileObo (filePath : string) =
    FileIO.readFile filePath
    |> Obo.parseOboTerms

let fromPsiMS =
    fromFileObo (fileDir + "\Ontologies_Terms\Psi-MS.txt")

let fromPride =
    fromFileObo (fileDir + "\Ontologies_Terms\Pride.txt")

let fromUniMod =
    fromFileObo (fileDir + "\Ontologies_Terms\Unimod.txt")

let fromUnit_Ontology =
    fromFileObo (fileDir + "\Ontologies_Terms\Unit_Ontology.txt")

///Applying functions/////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////

open InsertStatements 

let ontologyCustom =
     createOntology "Custom" null (new System.Collections.Generic.List<Term>([createTermCustom "000000" "Unitless" (createOntology "Custom" null null)]))

let ontologyPsiMS =
    createOntology "Psi-MS" null (createTerm(createOntology "Psi-MS" null null) fromPsiMS)

let ontologyPride =
    createOntology "Pride" null (createTerm(createOntology "Pride" null null) fromPride)

let ontologyUniMod =
    createOntology "UniMod" null (createTerm(createOntology "UniMod" null null) fromUniMod)

let ontologyUnit_Ontology =
    createOntology "Unit_Ontology" null (createTerm(createOntology "Unit_Ontology" null null) fromUnit_Ontology)

let spectrumIdentification =
    createSpectrumIdentification "Test" "Today" 1 2 null

let spectrumIdentificationParam =
    createSpectrumIdentificationParam spectrumIdentification "Point" ontologyPride.Terms.[34] ontologyCustom.Terms.[0]

///Creating && Checking && inserting into DB
let initDB =
    let db = new DBMSContext()
    
    db.Database.EnsureCreated()                                     |> ignore

    db.Ontology.Add(ontologyCustom)                                 |> ignore
    db.Ontology.Add(ontologyPsiMS)                                  |> ignore
    db.Ontology.Add(ontologyPride)                                  |> ignore
    db.Ontology.Add(ontologyUniMod)                                 |> ignore
    db.Ontology.Add(ontologyUnit_Ontology)                          |> ignore
    db.SpectrumIdentification.Add(spectrumIdentification)           |> ignore
    db.SpectrumIdentificationParam.Add(spectrumIdentificationParam) |> ignore
    db.SaveChanges()

///Define Queries for DB//////////////////////////////
/////////////////////////////////////////////////////////////////////////
    
let context = new DBMSContext()

//let testOntology =
//    query {
//        for i in context.Ontology do
//        select i
//          }

////let testTerm =
////    query {
////        for i in context.Term do
////        select i
////          }

let readLine (input : seq<'a>) =
    for i in input do
        Console.WriteLine(i)

//readLine testOntology
//readLine testTerm

//let testTerm2 =
//    (query {
//        for i in context.Term do
//        if i.ID = "" then select i}).Single()
//testTerm2.Name <- "Some BoB"

//let testTerm3 =
//    (query {
//            for i in context.Term do
//            if i.ID = "" 
//                then select i.Ontology
//           }
//    )
//readLine testTerm3

//let testTerm4 =
//    (query {
//        for i in context.Term do
//            if i.Name = "" && i.ID = "" 
//                then select i
//           }
//    )
//readLine testTerm4

let selectSpectrumIdentificationByID iD =
    (query {
            for i in context.SpectrumIdentification do
                if i.ID = iD 
                then select i
           }
    )

let selectSpectrumIdentificationByName name =
    (query {
            for i in context.SpectrumIdentification do
                if i.Name = name 
                    then select i
           }
    )

let selectSpectrumIdentificationByActivityDate activityDate =
    (query {
            for i in context.SpectrumIdentification do
                if i.ActivityDate = activityDate 
                    then select i
           }
    )

let selectSpectrumIdentificationBySIList sIList =
    (query {
            for i in context.SpectrumIdentification do
                if i.SpectrumIdentificationList = sIList 
                    then select i
           }
    )

let selectSpectrumIdentificationBySIProtocol sIProtocol =
    (query {
            for i in context.SpectrumIdentification do
                if i.SpectrumIdentificationProtocol = sIProtocol 
                    then select i
           }
    )

let selectSpectrumIdentificationParamBySI sI =
    (query {
            for i in context.SpectrumIdentificationParam do
                if i.FKParamContainer = sI 
                    then select (i, i.Term, i.Unit)
           }
    )

let selectSpectrumIdentificationParamBySIID sIID =
    (query {
            for i in context.SpectrumIdentificationParam do
                if i.FKParamContainer.ID = sIID
                    then select (i, i.Term, i.Unit)
           }
    )

let selectSpectrumIdentificationParamBySIName sIName =
    (query {
            for i in context.SpectrumIdentificationParam do
                if i.FKParamContainer.Name = sIName
                    then select (i, i.Term, i.Unit)
           }
    )

let selectTermByOntologyID ontologyID =
    (query {
            for i in context.Term do
                if i.Ontology.ID = ontologyID
                    then select (i)
           }
    )

let selectTermByOntologyName ontologyName =
    (query {
            for i in context.Term do
                if i.Ontology.Name = ontologyName
                    then select (i)
           }
    )

let selectTermByTermID termID =
    (query {
            for i in context.Term do
                if i.ID = termID
                    then select (i)
           }
    )

let selectTermByTermName termName =
    (query {
            for i in context.Term do
                if i.Name = termName
                    then select (i)
           }
    )

context.SaveChanges()

///Apply queries to DB////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////

selectSpectrumIdentificationByID 1
|> readLine
selectSpectrumIdentificationByName "Test"
|> readLine
selectSpectrumIdentificationByActivityDate "Today"
|> readLine
selectSpectrumIdentificationBySIList 1
|> readLine
selectSpectrumIdentificationBySIProtocol 2
|> readLine
selectSpectrumIdentificationParamBySI spectrumIdentification
|> readLine
selectTermByOntologyID 3
|> readLine
selectTermByOntologyName "Pride"
|> readLine

///Testen verschiedener Varianten, Ergebnis anhand eines Linearitätstests überprüfen: Stabile Linie ja, nein?
